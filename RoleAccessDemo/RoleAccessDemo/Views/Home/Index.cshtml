@{
    ViewBag.Title = "Home Page";
}
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">

@Html.DropDownList("ParentPage", new SelectList(ViewBag.ParentPageList, "Id", "PageName"))
<div id="PageAccess">

</div>
@*@using (Html.BeginForm("index","Home",FormMethod.Post,null))
{
    <table id="tblPageAccess">
        <tr>
            <th>Page Name</th>
            <th>View</th>
            <th>Add</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </table>
    <input type="submit" value="submit" />
}*@
@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
            <p>
                To learn more about ASP.NET MVC visit
                <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
                The page features <mark>videos, tutorials, and samples</mark> to help you get the most from ASP.NET MVC.
                If you have any questions about ASP.NET MVC visit
                <a href="http://forums.asp.net/1146.aspx/1?MVC" title="ASP.NET MVC Forum">our forums</a>.
            </p>
        </div>
    </section>
}
<h3>We suggest the following:</h3>
<ol class="round">
    <li class="one">
        <h5>Getting Started</h5>
        ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
        enables a clean separation of concerns and that gives you full control over markup
        for enjoyable, agile development. ASP.NET MVC includes many features that enable
        fast, TDD-friendly development for creating sophisticated applications that use
        the latest web standards.
        <a href="http://go.microsoft.com/fwlink/?LinkId=245151">Learn more…</a>
    </li>

    <li class="two">
        <h5>Add NuGet packages and jump-start your coding</h5>
        NuGet makes it easy to install and update free libraries and tools.
        <a href="http://go.microsoft.com/fwlink/?LinkId=245153">Learn more…</a>
    </li>

    <li class="three">
        <h5>Find Web Hosting</h5>
        You can easily find a web hosting company that offers the right mix of features
        and price for your applications.
        <a href="http://go.microsoft.com/fwlink/?LinkId=245157">Learn more…</a>
    </li>
</ol>


<script>
    $(document).ready(function () {
        //$('#example').DataTable({
        //    "processing": true,
        //    "serverSide": true,
        //    "ajax": "../server_side/scripts/server_processing.php"
        //});

        $("#ParentPage").change(function () {
            $.ajax({
                type: "POST",
                url: "/Home/GetPageAccess",
                data: { "ParentPageID": $("#ParentPage").val() },
                //dataType: "json",
                //contentType: 'application/json; charset=utf-8',
                success: function (data) {                    
                    $("#PageAccess").html(data);
                    //$("#tblPageAccess").find("tr:not(:first)").remove();                    
                    //for (var i = 0; i < data.length; i++) {
                    //    var tr = "<tr>";
                    //    tr += "<td><label>" + data[i].PageName + "</label>";
                    //    tr += "</td>";

                    //    tr += "<td><input type='checkbox'";
                    //    tr += data[i].View ? " checked=" + data[i].View + " " : " ";
                    //    tr += "value=" + data[i].View + ">";
                    //    tr += "<input type='hidden' name=View_" + i + " value='" + data[i].View + "'";
                    //    tr += "</td>";

                    //    tr += "<td><input type='checkbox'";
                    //    tr += data[i].Add ? " checked=" + data[i].Add + " " : " ";
                    //    tr += "value=" + data[i].Add + ">";
                    //    tr += "<input type='hidden' name=Add_" + i + " value='" + data[i].Add + "'";
                    //    tr += "</td>";

                    //    tr += "<td><input type='checkbox'";
                    //    tr += data[i].Edit ? " checked=" + data[i].Edit + " " : " ";
                    //    tr += "value=" + data[i].Edit + ">";
                    //    tr += "<input type='hidden' name=Edit_" + i + " value='" + data[i].Edit + "'";
                    //    tr += "</td>";

                    //    tr += "<td><input type='checkbox'";
                    //    tr += data[i].Delete ? " checked=" + data[i].Delete + " " : " ";
                    //    tr += "value=" + data[i].Delete + ">";
                    //    tr += "<input type='hidden' name=Delete_" + i + " value='" + data[i].Delete + "'";
                    //    tr += "</td>";
                    //    tr += "</tr>";
                    //    $('#tblPageAccess tr:last').after(tr);
                    //}



                },
                error: function () {
                    alert("Error occured!!")
                }
            });
        });
    });
</script>